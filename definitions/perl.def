DEF_DISABLE_ON="Darwin Minix"
DEF_FULL_NAME="Perl"
DEF_SHA="35770ea5cf49a1082852c2300ccc3cbbc58b70fd"
DEF_NAME="perl"
DEF_VERSION="5.24.0"
DEF_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.gz"
DEF_CONFIGURE="ignore"
DEF_EXPORTS="perl cpan cpan2dist cpanp config_data piconv psed prove pstruct ptar ptardiff shasum pl2pm"
DEF_MAKE_METHOD="sh ./Configure -des -Duseshrplib -DEBUGGING=none -Dprefix=${PREFIX} && make ${MAKE_OPTS}"
DEF_INSTALL_METHOD="make -s install"
DEF_AFTER_INSTALL_CALLBACK="link_shared_lib"

link_shared_lib () {
    case ${SYSTEM_NAME} in
        FreeBSD)
            ${LN_BIN} -s ${PREFIX}/lib/perl5/${APP_VERSION}/amd64-freebsd/CORE/libperl.so ${PREFIX}/lib/libperl.so
            ;;
        Linux)
            ${LN_BIN} -s ${PREFIX}/lib/perl5/${APP_VERSION}/x86_64-linux/CORE/libperl.so ${PREFIX}/lib/libperl.so
            ;;
    esac
}
