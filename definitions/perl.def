DISABLE_ON="Darwin"
APP_FULL_NAME="Perl"
APP_SHA="35770ea5cf49a1082852c2300ccc3cbbc58b70fd"
APP_NAME="perl"
APP_VERSION="5.24.0"
APP_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.gz"
APP_CONFIGURE_SCRIPT="ignore"
APP_EXPORTS="perl cpan cpan2dist cpanp config_data piconv psed prove pstruct ptar ptardiff shasum pl2pm"
APP_MAKE_METHOD="sh ./Configure -des -Duseshrplib -DEBUGGING=none -Dprefix=${PREFIX} && make ${MAKE_OPTS}"
APP_INSTALL_METHOD="make -s install"
APP_AFTER_INSTALL_CALLBACK="link_shared_lib"

link_shared_lib () {
    case ${SYSTEM_NAME} in
        FreeBSD)
            ${LN_BIN} -s ${PREFIX}/lib/perl5/${APP_VERSION}/amd64-freebsd/CORE/libperl.so ${PREFIX}/lib/libperl.so
            ;;
        Linux)
            ${LN_BIN} -s ${PREFIX}/lib/perl5/${APP_VERSION}/x86_64-linux/CORE/libperl.so ${PREFIX}/lib/libperl.so
            ;;
    esac
}
