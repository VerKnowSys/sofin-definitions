DEF_FULL_NAME="Clojure language"
DEF_NAME="clojure"
DEF_SHA="2b213fef63a31e0ab9930fc4ab8b4b1ffa4a2e69"
DEF_VERSION="1.4.0"
DEF_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.bz2"
DEF_CONFIGURE="binary"
DEF_AFTER_UNPACK_CALLBACK="${CP_BIN} -fR ${CACHE_DIR}cache/${APP_NAME}-${APP_VERSION}-${RUNTIME_SHA}/${APP_NAME}-${APP_VERSION}/ ${PREFIX}"
DEF_AFTER_CONFIGURE_CALLBACK="${FIND_BIN} ${PREFIX} -type f -name '*.dll' -o -name '*.exe' -o -name '*.bat' | ${XARGS_BIN} rm"
DEF_AFTER_INSTALL_CALLBACK="createLaunchScript"
DEF_EXPORTS="clj"

createLaunchScript () {
  ${MKDIR_BIN} -p ${PREFIX}/bin
  ${PRINTF_BIN} "#!/bin/sh
java -cp ${PREFIX}/clojure-${APP_VERSION}.jar clojure.main
" > ${PREFIX}/bin/clj
  ${CHMOD_BIN} +x ${PREFIX}/bin/clj
}
