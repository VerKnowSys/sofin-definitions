DEF_FULL_NAME="WeeChat, the extensible chat client."
DEF_STANDALONE=YES
DEF_NAME="weechat"
DEF_VERSION="2.4"
DEF_SHA="ddcf08ce98eb407592fda11b3b710b20d7cfdb5d"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.xz"
DEF_ORIGIN="https://weechat.org/files/src/${DEF_NAME}-${DEF_VERSION}.tar.xz" # https://github.com/weechat/weechat/releases
DEF_CONFIGURE_METHOD="cmake"
DEF_EXPORTS="weechat weechat-curses"
DEF_USE_SAFE_STACK=YES
unset DEF_USE_LTO

DEF_CONFIGURE_ARGS="-DENABLE_PHP=OFF -DENABLE_TCL=OFF -DENABLE_GUILE=OFF -DENABLE_RELAY=OFF -DENABLE_XFER=OFF -DENABLE_RUBY=OFF -DENABLE_JAVASCRIPT=OFF -DENABLE_PYTHON3=OFF -DENABLE_HEADLESS=OFF -DENABLE_NLS=OFF -DCA_FILE=${SERVICE_DIR}/etc/ssl/cert.pem -DENABLE_NCURSES=ON -DENABLE_GNUTLS=ON -DENABLE_PYTHON=ON -DENABLE_PERL=ON -DENABLE_NCURSES=ON -DENABLE_GNUTLS=ON -DENABLE_PYTHON=ON -DENABLE_PERL=ON"
case "${SYSTEM_NAME}" in
    Darwin)
        DEF_REQUIREMENTS="jemalloc ncurses libunistring lzo libedit libsodium lua51 libxml2 pcre libffi openssl libgpg-error libgcrypt gmp nettle libtasn1 p11-kit texinfo libidn gnutls libidn2 nghttp2 libssh2 libuuid curl"
        DEF_CONFIGURE_ARGS="${DEF_CONFIGURE_ARGS} -DENABLE_LUA=ON -DENABLE_SPELL=ON"
        # CFLAGS="-std=c11 -w -Wno-error -Wno-implicit-function-declaration" # ${CFLAGS}
        ;;

    *)
        DEF_REQUIREMENTS="jemalloc libunistring lzo libedit libevent libsodium libxml2 pcre libffi libressl perl python27 libgpg-error libgcrypt gmp nettle libtasn1 p11-kit texinfo libidn gnutls libidn2 nghttp2 libssh2 libuuid curl ruby24"
        DEF_CONFIGURE_ARGS="${DEF_CONFIGURE_ARGS} -DENABLE_LUA=OFF"
        ;;
esac
