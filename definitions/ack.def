DEF_FULL_NAME="Ack grep replacement"
DEF_SHA="7054ec0007eb6f1ef975946b64ff9d2e8ab1f649"
DEF_NAME="ack"
DEF_VERSION="2.04"
DEF_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.gz"
DEF_CONFIGURE="ignore"
DEF_MAKE_METHOD="true"
DEF_INSTALL_METHOD="install_ack"
DEF_REQUIREMENTS="perl"
DEF_EXPORTS="ack"

install_ack () {
    # the whole thing is to replace standard location of perl by absolute call to prefixed perl
    if [ "${SYSTEM_NAME}" != "Darwin" ]; then
        ${MKDIR_BIN} -p ${PREFIX}/bin
        ${CP_BIN} ${CACHE_DIR}cache/${DEF_NAME}-${DEF_VERSION}-${RUNTIME_ID}/${DEF_NAME}-${DEF_VERSION}/bin/ack ${PREFIX}/bin/
        echo "#!${PREFIX}/bin/perl" > ${PREFIX}/bin/ack-pre
        ${CAT_BIN} ${PREFIX}/bin/ack >> ${PREFIX}/bin/ack-pre
        ${SED_BIN} '2d' ${PREFIX}/bin/ack-pre > ${PREFIX}/bin/ack
        ${RM_BIN} ${PREFIX}/bin/ack-pre
        ${CHMOD_BIN} 755 ${PREFIX}/bin/ack
    fi
}
