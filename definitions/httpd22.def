inherit httpd

DEF_FULL_NAME="Apache Httpd server version 2.2"
DEF_POSTFIX="22"
DEF_SHA="e3b55387112206307ba76526820a2627472f3787"
DEF_VERSION="2.2.31"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.bz2"
DEF_REQUIREMENTS="$(echo "${DEF_REQUIREMENTS}" | ${SED_BIN} -e 's/libressl/openssl/' 2>/dev/null)"

build_evasive () {
    MOD_NAME="mod_evasive"
    MOD_VERSION="1.10.1"
    ${FETCH_BIN} "${MAIN_SOURCE_REPOSITORY}${MOD_NAME}_${MOD_VERSION}_apache_2.4.tar.gz" ${FETCH_OPTS}
    ${TAR_BIN} xf "${MOD_NAME}_${MOD_VERSION}_apache_2.4.tar.gz" && \
    cd "${MOD_NAME}" && \
    PATH=${PREFIX}/bin:/bin:/usr/bin apxs -cia mod_evasive20.c && \
    note "Installed: mod_evasive" && \
    return 0
}
