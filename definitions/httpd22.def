inherit httpd

DEF_FULL_NAME="Apache Httpd server version 2.2"
DEF_SUFFIX="22"
DEF_SHA="829206394e238af0b800fc78d19c74ee466ecb23"
DEF_VERSION="2.2.34"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.bz2"
DEF_REQUIREMENTS="$(echo "${DEF_REQUIREMENTS}" | ${SED_BIN} -e 's/libressl/openssl/' 2>/dev/null)"

build_evasive () {
    MOD_NAME="mod_evasive"
    MOD_VERSION="1.10.1"
    run "${FETCH_BIN} ${MAIN_SOURCE_REPOSITORY}${MOD_NAME}_${MOD_VERSION}_apache_2.4.tar.gz ${FETCH_OPTS}"
    run "${TAR_BIN} xf ${MOD_NAME}_${MOD_VERSION}_apache_2.4.tar.gz" && \
    cd "${MOD_NAME}" && \
    run "PATH=${PREFIX}/bin:/bin:/usr/bin apxs -cia mod_evasive20.c" && \
    note "Installed: mod_evasive" && \
    return 0
}
