DEF_DISABLE_ON="Linux Darwin"
DEF_FULL_NAME="Glusterfs"
DEF_ORIGIN="http://www.gluster.org/download/"
DEF_SHA="d2e9a4838a1bc2b4412089c5a71040fed5198079"
DEF_NAME="glusterfs"
DEF_VERSION="3.8.4"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.gz"
DEF_REQUIREMENTS="pkgconf m4 libtool make zlib gettext xz bzip2 libedit perl libffi libressl python27 glib texinfo libxml2 bison autoconf automake sqlite userspace-rcu"
DEF_AFTER_UNPACK_METHOD="./autogen.sh"
DEF_CONFIGURE_ARGS="--enable-shared --enable-static --enable-fuse-client --enable-qemu-block --with-mountutildir=${PREFIX}/sbin --with-xml-prefix=${PREFIX} --with-initdir=${SERVICE_DIR}/etc/rc.d --disable-cmocka --disable-epoll --disable-bd-xlator --disable-ibverbs --disable-firewalld --disable-systemtap --disable-georeplication"
DEF_COMPILER_ARGS="-I${PREFIX}/include"
DEF_LINKER_ARGS="-L${PREFIX}/lib -L/usr/lib"
DEF_EXPORTS="gobject-query gresource gsettings gtester gtester-report gfind_missing_files gcron.py gluster glusterd glusterfs glusterfsd snap_scheduler.py umountd glusterfind mount_glusterfs"
DEF_USEFUL="bin/python* bin/sqlite*"
DEF_USELESS="include/python* lib/*perl* lib/*.sh share/aclocal* share/auto* share/libtool share/bison"
DEF_AFTER_INSTALL_METHOD="after_install"
after_install () {
    ${SED_BIN} -i '' -e "s#/usr/bin/env python#${PREFIX}/bin/python#" ${PREFIX}/bin/glusterfind ${PREFIX}/sbin/gcron.py ${PREFIX}/sbin/snap_scheduler.py
    return 0
}
DEF_NO_CCACHE=YES
DEF_NO_LLVM_LINKER=YES
