APP_FULL_NAME="Scons"
APP_NAME="scons"
APP_SHA="f505f70803264155aaa02870b24220545d646bc1"
APP_VERSION="2.4.1"
APP_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-src-${APP_VERSION}.tar.gz"
APP_CONFIGURE_SCRIPT="ignore"
APP_REQUIREMENTS="gmake libressl libxml2 python27"
APP_EXPORTS="scons scons-time sconsign"
APP_USEFUL="bin/python*"

case ${SYSTEM_NAME} in
    Darwin)
        python_bin="/usr/bin/python"
        ;;
    *)
        python_bin="${PREFIX}/bin/python"
        ;;
esac

APP_MAKE_METHOD="bootstrap_stuff"
bootstrap_stuff () {
    cur_dir="$(${PWD_BIN} 2>/dev/null)"
    ${python_bin} bootstrap.py build/scons
    cd ${cur_dir}
}

APP_INSTALL_METHOD="install_stuff"
install_stuff () {
    cd build/scons
    ${python_bin} setup.py install \
        --prefix=${PREFIX} --standard-lib \
        --no-version-script
    cd ../..
}
