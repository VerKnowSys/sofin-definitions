DEF_FULL_NAME="Erlang OTP"
DEF_SHA="3be958b529de4be19d77eb77f587a76210b43bfd"
DEF_NAME="otp"
DEF_VERSION="19.0"
DEF_POSTFIX="19"
DEF_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}_src_${DEF_VERSION}.tar.gz"
DEF_REQUIREMENTS="make perl libressl"
DEF_INSTALL_METHOD="make -s install && install_repl_history"
DEF_CONFIGURE_ARGS="--enable-threads --enable-kernel-poll --disable-silent-rules --enable-smp-support --enable-sctp --enable-hipe --with-ssl=${PREFIX} --without-javac --enable-native-libs --disable-debug --enable-dynamic-ssl-lib --enable-shared-zlib"
if [ "${SYSTEM_NAME}" != "Linux" ]; then
    DEF_CONFIGURE_ARGS="${DEF_CONFIGURE_ARGS} --with-dynamic-trace=dtrace"
fi
DEF_EXPORTS="ct_run dialyzer epmd erl erlc escript run_erl to_erl typer"
DEF_CONFLICTS_WITH="Erlang Elixir"

install_repl_history() {
    ${GIT_BIN} clone https://github.com/ferd/erlang-history.git
    cd erlang-history
    PATH=$PATH:${PREFIX}/bin:/bin make install
}
