DISABLE_ON="Linux"
APP_FULL_NAME="Low Level Virtual Machine"
APP_SHA="723ac918979255706434a05f5af34b71c49c9971"
APP_NAME="llvm"
APP_VERSION="3.8.0"
APP_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.src.tar.xz"
APP_REQUIREMENTS="gmake bzip2 xz libffi python27 libxml2 ccache cmake"
APP_CONFIGURE_ARGS="-DLLVM_INCLUDE_EXAMPLES=off -DLLVM_INCLUDE_TESTS=off -DLLVM_ENABLE_RTTI=on -DLLVM_ENABLE_FFI=on -DFFI_INCLUDE_DIR=${PREFIX}/include -DFFI_LIBRARY_DIR=${PREFIX}/lib -DLLVM_TARGETS_TO_BUILD=X86 -DLLVM_INSTALL_UTILS=on -DLLVM_OPTIMIZED_TABLEGEN=on" # LLVM_TOOL_LLDB_BUILD LLVM_TOOL_LLD_BUILD:BOOL
APP_CONFIGURE_SCRIPT="cmake"
APP_CMAKE_BUILD_DIR="../"
APP_EXPORTS="bugpoint c-index-test clang clang++ clang-cpp clang-tblgen idle llc lli llvm-ar llvm-as llvm-bcanalyzer llvm-config llvm-cov llvm-diff llvm-dis llvm-dwarfdump llvm-extract llvm-ld llvm-link llvm-mc llvm-nm llvm-objdump llvm-prof llvm-ranlib llvm-readobj llvm-rtdyld llvm-size llvm-stress llvm-stub llvm-tblgen macho-dump opt lldb"
APP_USELESS="lib/perl* include/python* lib/python* share man"

APP_AFTER_UNPACK_CALLBACK="make_builddir"
make_builddir () {
    ${MKDIR_BIN} -p build
    cd build
}
APP_AFTER_INSTALL_CALLBACK="go_up"
go_up () {
    cd ..
}
