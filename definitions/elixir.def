DEF_FULL_NAME="Elixir Language"
DEF_STANDALONE=YES
DEF_NAME="elixir"
DEF_VERSION="1.15.0"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-otp-26.zip"
DEF_EXPORTS="ct_run dialyzer epmd erl erlc escript run_erl to_erl typer mix elixir elixirc iex ex_doc"
DEF_REQUIREMENTS="@otp"
DEF_TYPE=meta

DEF_AFTER_INSTALL_METHOD="install_elixir"
install_elixir () {
    cd /tmp
    ${CURL_BIN} -O "${DEF_SOURCE_PATH}"
    mkdir -p "${PREFIX}"
    unzip -d "${PREFIX}" "${DEF_SOURCE_PATH##*/}"

    run "${PREFIX}/bin/mix local.hex --force"
    run "${PREFIX}/bin/mix escript.install hex ex_doc --force"
    run "${MV_BIN} -f ${HOME}/.mix/escripts/ex_doc ${PREFIX}/bin/ex_doc"
}

DEF_AFTER_EXPORT_METHOD="${PREFIX}/bin/mix local.hex --force"
