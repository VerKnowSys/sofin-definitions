DEF_FULL_NAME="RRDtool"
DEF_NAME="rrdtool"
DEF_SHA="8275cd4dd3fb2086686ee5acfc7cc5e756483e0e"
DEF_VERSION="1.5.5"
DEF_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.gz"
DEF_REQUIREMENTS="make pkgconf zlib bzip2 pth lzma xz lzo m4 libtool libressl python27 perl autoconf automake bison util-macros cups expat jbig2dec jbigkit libiconv nasm libjpeg-turbo libpaper texinfo libidn jpeg tiff lcms2 krb freetype fontconfig jasper fftw libffi gettext glib gs groff libpng pixman cairo pango"
DEF_CONFIGURE_ARGS="--disable-examples --disable-perl --disable-librados --disable-ruby --disable-lua --disable-tcl --disable-python --disable-dependency-tracking --enable-rrd_graph --with-libintl-prefix=${PREFIX} --enable-nls --enable-rrd_restore --enable-rrdcgi --enable-pthread --with-rrd-default-font=${PREFIX}/lib/X11/fonts/VeraMono.ttf"
DEF_EXPORTS="rrdtool rrdcreate rrdcached rrdupdate rrdinfo rrdcgi rrdgraph"
DEF_USEFUL="bin/*rrd*"
DEF_MAKE_METHOD="make -s"
DEF_INSTALL_METHOD="make -s install"
DEF_USELESS="include lib/python*"
DEF_NO_FAST_MATH=YES
DEF_AFTER_UNPACK_METHOD="fetch_vera_font"

fetch_vera_font () {
    ${FETCH_BIN} ${MAIN_SOURCE_REPOSITORY}VeraMono.ttf
    ${MV_BIN} VeraMono.ttf ${PREFIX}/lib/X11/fonts/
    ${CHMOD_BIN} -R a+r ${PREFIX}/lib/X11/fonts/*.ttf
}
