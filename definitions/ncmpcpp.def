DEF_FULL_NAME="Music Player Daemon Ncurses Client ++"
DEF_NAME="ncmpcpp"
DEF_SHA="9f2b1d8028cb0827cecd88efe206c7d61bafabf8"
DEF_VERSION="0.7.3"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.bz2"
DEF_CONFIGURE_ARGS="--disable-shared --enable-static --enable-clock --with-curl --with-taglib"
DEF_REQUIREMENTS="pkgconf make ccache m4 perl libtool icu libedit cmake taglib curl libffi boost-static libmpdclient"
DEF_USELESS="share doc include"
DEF_EXPORTS="ncmpcpp ncmpcpp.bin"

DEF_AFTER_INSTALL_METHOD="after_install_cbk"
after_install_cbk () {
    # make wrapper for ncmpcpp which does not include rpath information in binary:
    ${MV_BIN} ${PREFIX}/bin/ncmpcpp ${PREFIX}/bin/ncmpcpp.bin
    printf "#\!/bin/sh\nLD_LIBRARY_PATH=${PREFIX}/lib ${PREFIX}/bin/ncmpcpp.bin \$*\n" > ${PREFIX}/bin/ncmpcpp
    ${CHMOD_BIN} 755 ${PREFIX}/bin/ncmpcpp
}
