inherit libressl

DEF_FULL_NAME="OpenSSL v1.1.1"
DEF_NAME="openssl"
DEF_VERSION="1.1.1c"
DEF_SHA="71b830a077276cbeccc994369538617a21bee808"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.gz"
DEF_ORIGIN="https://www.openssl.org/source/${DEF_NAME}-${DEF_VERSION}.tar.gz"
DEF_REQUIREMENTS="perl"
DEF_CONFIGURE_METHOD="./Configure"
unset DEF_USE_LTO

case "${SYSTEM_NAME}" in
    FreeBSD|OpenBSD|NetBSD)
        DEF_CONFIGURE_ARGS="--prefix=${PREFIX} --openssldir=${SERVICE_DIR}/etc/ssl BSD-x86_64"
        ;;

    Darwin)
        DEF_CONFIGURE_ARGS="--prefix=${PREFIX} --openssldir=${SERVICE_DIR}/etc/ssl darwin64-x86_64-cc enable-ec_nistp_64_gcc_128 shared zlib-dynamic"
        unset DEF_REQUIREMENTS
        ;;

    *)
        error "Platform: ${SYSTEM_NAME} is not supported by definition: ${DEF_NAME}${DEF_SUFFIX} with version: ${DEF_VERSION}"
        ;;
esac
