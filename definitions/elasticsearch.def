DEF_DISABLE_ON="Darwin Linux"
DEF_FULL_NAME="Elastic Search"
DEF_STANDALONE=YES
DEF_NAME="elasticsearch"
DEF_SHA="b6d681b878e3a906fff8c067b3cfe855240bffbb"
DEF_VERSION="2.1.0"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.gz"
DEF_CONFIGURE_METHOD="binary"
DEF_AFTER_UNPACK_METHOD="${CP_BIN} -fR ${BUILD_DIR}/${DEF_NAME}-${DEF_VERSION}/ ${PREFIX}"
DEF_REQUIREMENTS="openjdk8"
DEF_USELESS="demo sample samples src.zip THIRD_PARTY_* COPYING"
DEF_USEFUL="bin/java bin/jar"
DEF_EXPORTS="elasticsearch elasticsearch.in.sh plugin"
DEF_AFTER_INSTALL_METHOD="patch_script"

patch_script () {
    ${SED_BIN} -i '' -e "s#CDPATH=\"\"#export JAVA_HOME=${PREFIX}/jre; CDPATH=\"\"#"  ${PREFIX}/bin/elasticsearch ${PREFIX}/bin/plugin
}
