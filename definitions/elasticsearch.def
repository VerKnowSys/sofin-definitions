DISABLE_ON="Darwin Linux"
APP_FULL_NAME="Elastic Search"
APP_STANDALONE="true"
APP_NAME="elasticsearch"
APP_SHA="a7c0536bd660b2921a96a37b814f9accc76f5cd9"
APP_VERSION="1.7.2"
APP_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}${APP_NAME}-${APP_VERSION}.tar.gz"
APP_CONFIGURE_SCRIPT="binary"
APP_AFTER_UNPACK_CALLBACK="${CP_BIN} -fR ${CACHE_DIR}cache/${APP_NAME}-${APP_VERSION}-${RUNTIME_SHA}/${APP_NAME}-${APP_VERSION}/ ${PREFIX}"
APP_REQUIREMENTS="openjdk8"
APP_USELESS="demo sample samples src.zip THIRD_PARTY_* COPYING"
APP_USEFUL="bin/java bin/jar"
APP_EXPORTS="elasticsearch elasticsearch.in.sh plugin"
APP_AFTER_INSTALL_CALLBACK="patch_script"

patch_script () {
    ${SED_BIN} -i '' -e "s#CDPATH=\"\"#export JAVA_HOME=${PREFIX}/jre; CDPATH=\"\"#"  ${PREFIX}/bin/elasticsearch ${PREFIX}/bin/plugin
}
