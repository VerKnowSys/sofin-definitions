DEF_FULL_NAME="Erlang OTP"
DEF_SHA="433bafe9bb16a2230830de93985c1d6e02ec1c4e"
DEF_NAME="erlang"
DEF_VERSION="17.5"
DEF_POSTFIX="17"
DEF_HTTP_PATH="${MAIN_SOURCE_REPOSITORY}otp_src_${DEF_VERSION}.tar.gz"
DEF_REQUIREMENTS="gmake perl libressl"
DEF_MAKE_METHOD="gmake -s ${MAKE_OPTS}"
DEF_INSTALL_METHOD="gmake install -s && install_repl_history"
DEF_CONFIGURE_ARGS="--enable-threads --enable-kernel-poll --disable-silent-rules --enable-smp-support --enable-sctp --enable-hipe --with-ssl=${PREFIX} --without-javac --enable-native-libs --disable-debug --enable-dynamic-ssl-lib --enable-shared-zlib"
DEF_EXPORTS="ct_run dialyzer epmd erl erlc escript run_erl to_erl typer"
DEF_CONFLICTS_WITH="Erlang"

install_repl_history() {
    ${GIT_BIN} clone https://github.com/ferd/erlang-history.git
    cd erlang-history
    PATH=$PATH:${PREFIX}/bin:/bin gmake install
}
