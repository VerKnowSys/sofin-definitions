diff --git OTP_VERSION OTP_VERSION
index c9d93c554c..6d40ebaad3 100644
--- OTP_VERSION
+++ OTP_VERSION
@@ -1 +1 @@
-19.3.6.6
+19.3.6.7
diff --git lib/kernel/doc/src/notes.xml lib/kernel/doc/src/notes.xml
index f5a0e68805..c6d7b00e24 100644
--- lib/kernel/doc/src/notes.xml
+++ lib/kernel/doc/src/notes.xml
@@ -31,6 +31,26 @@
   </header>
   <p>This document describes the changes made to the Kernel application.</p>
 
+<section><title>Kernel 5.2.0.1</title>
+
+    <section><title>Fixed Bugs and Malfunctions</title>
+      <list>
+        <item>
+          <p>
+	    Add <c>os:cmd/2</c> that takes an options map as the
+	    second argument.</p>
+          <p>
+	    Add <c>max_size</c> as an option to <c>os:cmd/2</c> that
+	    control the maximum size of the result that
+	    <c>os:cmd/2</c> will return.</p>
+          <p>
+	    Own Id: OTP-14823</p>
+        </item>
+      </list>
+    </section>
+
+</section>
+
 <section><title>Kernel 5.2</title>
 
     <section><title>Fixed Bugs and Malfunctions</title>
diff --git lib/kernel/doc/src/os.xml lib/kernel/doc/src/os.xml
index 739ac35d2a..a6a63448b7 100644
--- lib/kernel/doc/src/os.xml
+++ lib/kernel/doc/src/os.xml
@@ -38,17 +38,35 @@
       most platforms.</p>
   </description>
 
+  <datatypes>
+    <datatype>
+      <name name="os_command"/>
+    </datatype>
+    <datatype>
+      <name name="os_command_opts"/>
+      <desc>
+        <p>Options for <seealso marker="#cmd/2"><c>os:cmd/2</c></seealso></p>
+        <taglist>
+          <tag><c>max_size</c></tag>
+          <item>
+            <p>The maximum size of the data returned by the <c>os:cmd</c> call.
+            See the <seealso marker="#cmd/2"><c>os:cmd/2</c></seealso>
+            documentation for more details.</p>
+          </item>
+        </taglist>
+      </desc>
+    </datatype>
+  </datatypes>
+
   <funcs>
     <func>
       <name name="cmd" arity="1"/>
+      <name name="cmd" arity="2"/>
       <fsummary>Execute a command in a shell of the target OS.</fsummary>
       <desc>
         <p>Executes <c><anno>Command</anno></c> in a command shell of the
-          target OS,
-          captures the standard output of the command, and returns this
-          result as a string. This function is a replacement of
-          the previous function <c>unix:cmd/1</c>; they are equivalent on a
-          Unix platform.</p>
+          target OS, captures the standard output of the command,
+          and returns this result as a string.</p>
         <p><em>Examples:</em></p>
         <code type="none">
 LsOut = os:cmd("ls"), % on unix platform
@@ -57,6 +75,21 @@ DirOut = os:cmd("dir"), % on Win32 platform</code>
           called from another program (for example, <c>os:cmd/1</c>)
           can differ, compared with the standard output of the command
           when called directly from an OS command shell.</p>
+        <p><c>os:cmd/2</c> was added in kernel-5.5 (OTP-20.2.1). It makes it
+          possible to pass an options map as the second argument in order to
+          control the behaviour of <c>os:cmd</c>. The possible options are:
+        </p>
+        <taglist>
+          <tag><c>max_size</c></tag>
+          <item>
+            <p>The maximum size of the data returned by the <c>os:cmd</c> call.
+              This option is a safety feature that should be used when the command
+              executed can return a very large, possibly infinite, result.</p>
+            <code type="none">
+> os:cmd("cat /dev/zero", #{ max_size => 20 }).
+[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]</code>
+          </item>
+        </taglist>
       </desc>
     </func>
 
diff --git lib/kernel/src/os.erl lib/kernel/src/os.erl
index a90a6dcca7..92ac401b72 100644
--- lib/kernel/src/os.erl
+++ lib/kernel/src/os.erl
@@ -21,7 +21,7 @@
 
 %% Provides a common operating system interface.
 
--export([type/0, version/0, cmd/1, find_executable/1, find_executable/2]).
+-export([type/0, version/0, cmd/1, cmd/2, find_executable/1, find_executable/2]).
 
 -include("file.hrl").
 
@@ -32,6 +32,11 @@
          putenv/2, system_time/0, system_time/1,
 	 timestamp/0, unsetenv/1]).
 
+-type os_command() :: atom() | io_lib:chars().
+-type os_command_opts() :: #{ max_size => non_neg_integer() | infinity }.
+
+-export_type([os_command/0, os_command_opts/0]).
+
 -spec getenv() -> [string()].
 
 getenv() -> erlang:nif_error(undef).
@@ -223,15 +228,21 @@ extensions() ->
 
 %% Executes the given command in the default shell for the operating system.
 -spec cmd(Command) -> string() when
-      Command :: atom() | io_lib:chars().
+      Command :: os_command().
 cmd(Cmd) ->
+    cmd(Cmd, #{ }).
+
+-spec cmd(Command, Options) -> string() when
+      Command :: os_command(),
+      Options :: os_command_opts().
+cmd(Cmd, Opts) ->
     validate(Cmd),
     {SpawnCmd, SpawnOpts, SpawnInput, Eot} = mk_cmd(os:type(), Cmd),
     Port = open_port({spawn, SpawnCmd}, [binary, stderr_to_stdout,
                                          stream, in, hide | SpawnOpts]),
     MonRef = erlang:monitor(port, Port),
     true = port_command(Port, SpawnInput),
-    Bytes = get_data(Port, MonRef, Eot, []),
+    Bytes = get_data(Port, MonRef, Eot, [], 0, maps:get(max_size, Opts, infinity)),
     demonitor(MonRef, [flush]),
     String = unicode:characters_to_list(Bytes),
     if  %% Convert to unicode list if possible otherwise return bytes
@@ -282,12 +293,13 @@ validate1([List|Rest]) when is_list(List) ->
 validate1([]) ->
     ok.
 
-get_data(Port, MonRef, Eot, Sofar) ->
+get_data(Port, MonRef, Eot, Sofar, Size, Max) ->
     receive
 	{Port, {data, Bytes}} ->
-            case eot(Bytes, Eot) of
+            case eot(Bytes, Eot, Size, Max) of
                 more ->
-                    get_data(Port, MonRef, Eot, [Sofar,Bytes]);
+                    get_data(Port, MonRef, Eot, [Sofar, Bytes],
+                             Size + byte_size(Bytes), Max);
                 Last ->
                     catch port_close(Port),
                     flush_until_down(Port, MonRef),
@@ -298,13 +310,16 @@ get_data(Port, MonRef, Eot, Sofar) ->
 	    iolist_to_binary(Sofar)
     end.
 
-eot(_Bs, <<>>) ->
+eot(Bs, <<>>, Size, Max) when Size + byte_size(Bs) < Max ->
     more;
-eot(Bs, Eot) ->
+eot(Bs, <<>>, Size, Max) ->
+    binary:part(Bs, {0, Max - Size});
+eot(Bs, Eot, Size, Max) ->
     case binary:match(Bs, Eot) of
-        nomatch -> more;
-        {Pos, _} ->
-            binary:part(Bs,{0, Pos})
+        {Pos, _} when Size + Pos < Max ->
+            binary:part(Bs,{0, Pos});
+        _ ->
+            eot(Bs, <<>>, Size, Max)
     end.
 
 %% When port_close returns we know that all the
diff --git lib/kernel/test/os_SUITE.erl lib/kernel/test/os_SUITE.erl
index e76d6ec482..d7f0463289 100644
--- lib/kernel/test/os_SUITE.erl
+++ lib/kernel/test/os_SUITE.erl
@@ -25,7 +25,8 @@
 -export([space_in_cwd/1, quoting/1, cmd_unicode/1, space_in_name/1, bad_command/1,
 	 find_executable/1, unix_comment_in_command/1, deep_list_command/1,
          large_output_command/1, background_command/0, background_command/1,
-         message_leak/1, close_stdin/0, close_stdin/1, perf_counter_api/1]).
+         message_leak/1, close_stdin/0, close_stdin/1, max_size_command/1,
+         perf_counter_api/1]).
 
 -include_lib("common_test/include/ct.hrl").
 
@@ -37,7 +38,7 @@ all() ->
     [space_in_cwd, quoting, cmd_unicode, space_in_name, bad_command,
      find_executable, unix_comment_in_command, deep_list_command,
      large_output_command, background_command, message_leak,
-     close_stdin, perf_counter_api].
+     close_stdin, max_size_command, perf_counter_api].
 
 groups() ->
     [].
@@ -312,6 +313,27 @@ close_stdin(Config) ->
 
     "-1" = os:cmd(Fds).
 
+max_size_command(_Config) ->
+
+    Res20 = os:cmd("cat /dev/zero", #{ max_size => 20 }),
+    20 = length(Res20),
+
+    Res0 = os:cmd("cat /dev/zero", #{ max_size => 0 }),
+    0 = length(Res0),
+
+    Res32768 = os:cmd("cat /dev/zero", #{ max_size => 32768 }),
+    32768 = length(Res32768),
+
+    ResHello = string_trim(os:cmd("echo hello", #{ max_size => 20 })),
+    5 = length(ResHello).
+
+string_trim(S) ->
+    lists:reverse(string_trim_left(lists:reverse(string_trim_left(S)))).
+
+string_trim_left([C | T]) when C =:= $\s; C =:= $\n; C =:= $\t; C =:= $\r ->
+    string_trim_left(T);
+string_trim_left(S) ->
+    S.
 
 %% Test that the os:perf_counter api works as expected
 perf_counter_api(_Config) ->
diff --git lib/kernel/vsn.mk lib/kernel/vsn.mk
index 76b020e8ed..ff8fd8ab63 100644
--- lib/kernel/vsn.mk
+++ lib/kernel/vsn.mk
@@ -1 +1 @@
-KERNEL_VSN = 5.2
+KERNEL_VSN = 5.2.0.1
diff --git otp_versions.table otp_versions.table
index 8e1246c9e9..a419d54dd0 100644
--- otp_versions.table
+++ otp_versions.table
@@ -1,3 +1,4 @@
+OTP-19.3.6.7 : kernel-5.2.0.1 # asn1-4.0.4 common_test-1.14 compiler-7.0.4.1 cosEvent-2.2.1 cosEventDomain-1.2.1 cosFileTransfer-1.2.1 cosNotification-1.2.2 cosProperty-1.2.1 cosTime-1.2.2 cosTransactions-1.3.2 crypto-3.7.4 debugger-4.2.1 dialyzer-3.1.1 diameter-1.12.2 edoc-0.8.1 eldap-1.2.2 erl_docgen-0.6.1 erl_interface-3.9.3 erts-8.3.5.4 et-1.6 eunit-2.3.2 gs-1.6.2 hipe-3.15.4 ic-4.4.2 inets-6.3.9 jinterface-1.7.1 megaco-3.18.1 mnesia-4.14.3.1 observer-2.3.1 odbc-2.12 orber-3.8.2 os_mon-2.4.2 otp_mibs-1.1.1 parsetools-2.1.4 percept-0.9 public_key-1.4 reltool-0.7.3 runtime_tools-1.11.1 sasl-3.0.3 snmp-5.2.5 ssh-4.4.2.2 ssl-8.1.3.1.1 stdlib-3.3 syntax_tools-2.1.1 tools-2.9.1 typer-0.9.12 wx-1.8 xmerl-1.3.14 :
 OTP-19.3.6.6 : ssh-4.4.2.2 ssl-8.1.3.1.1 # asn1-4.0.4 common_test-1.14 compiler-7.0.4.1 cosEvent-2.2.1 cosEventDomain-1.2.1 cosFileTransfer-1.2.1 cosNotification-1.2.2 cosProperty-1.2.1 cosTime-1.2.2 cosTransactions-1.3.2 crypto-3.7.4 debugger-4.2.1 dialyzer-3.1.1 diameter-1.12.2 edoc-0.8.1 eldap-1.2.2 erl_docgen-0.6.1 erl_interface-3.9.3 erts-8.3.5.4 et-1.6 eunit-2.3.2 gs-1.6.2 hipe-3.15.4 ic-4.4.2 inets-6.3.9 jinterface-1.7.1 kernel-5.2 megaco-3.18.1 mnesia-4.14.3.1 observer-2.3.1 odbc-2.12 orber-3.8.2 os_mon-2.4.2 otp_mibs-1.1.1 parsetools-2.1.4 percept-0.9 public_key-1.4 reltool-0.7.3 runtime_tools-1.11.1 sasl-3.0.3 snmp-5.2.5 stdlib-3.3 syntax_tools-2.1.1 tools-2.9.1 typer-0.9.12 wx-1.8 xmerl-1.3.14 :
 OTP-19.3.6.5 : erts-8.3.5.4 mnesia-4.14.3.1 ssh-4.4.2.1 # asn1-4.0.4 common_test-1.14 compiler-7.0.4.1 cosEvent-2.2.1 cosEventDomain-1.2.1 cosFileTransfer-1.2.1 cosNotification-1.2.2 cosProperty-1.2.1 cosTime-1.2.2 cosTransactions-1.3.2 crypto-3.7.4 debugger-4.2.1 dialyzer-3.1.1 diameter-1.12.2 edoc-0.8.1 eldap-1.2.2 erl_docgen-0.6.1 erl_interface-3.9.3 et-1.6 eunit-2.3.2 gs-1.6.2 hipe-3.15.4 ic-4.4.2 inets-6.3.9 jinterface-1.7.1 kernel-5.2 megaco-3.18.1 observer-2.3.1 odbc-2.12 orber-3.8.2 os_mon-2.4.2 otp_mibs-1.1.1 parsetools-2.1.4 percept-0.9 public_key-1.4 reltool-0.7.3 runtime_tools-1.11.1 sasl-3.0.3 snmp-5.2.5 ssl-8.1.3.1 stdlib-3.3 syntax_tools-2.1.1 tools-2.9.1 typer-0.9.12 wx-1.8 xmerl-1.3.14 :
 OTP-19.3.6.4 : ssl-8.1.3.1 # asn1-4.0.4 common_test-1.14 compiler-7.0.4.1 cosEvent-2.2.1 cosEventDomain-1.2.1 cosFileTransfer-1.2.1 cosNotification-1.2.2 cosProperty-1.2.1 cosTime-1.2.2 cosTransactions-1.3.2 crypto-3.7.4 debugger-4.2.1 dialyzer-3.1.1 diameter-1.12.2 edoc-0.8.1 eldap-1.2.2 erl_docgen-0.6.1 erl_interface-3.9.3 erts-8.3.5.3 et-1.6 eunit-2.3.2 gs-1.6.2 hipe-3.15.4 ic-4.4.2 inets-6.3.9 jinterface-1.7.1 kernel-5.2 megaco-3.18.1 mnesia-4.14.3 observer-2.3.1 odbc-2.12 orber-3.8.2 os_mon-2.4.2 otp_mibs-1.1.1 parsetools-2.1.4 percept-0.9 public_key-1.4 reltool-0.7.3 runtime_tools-1.11.1 sasl-3.0.3 snmp-5.2.5 ssh-4.4.2 stdlib-3.3 syntax_tools-2.1.1 tools-2.9.1 typer-0.9.12 wx-1.8 xmerl-1.3.14 :
