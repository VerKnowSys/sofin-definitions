DEF_FULL_NAME="ImageMagick Graphics Library"
DEF_NAME="Imagemagick"
DEF_VERSION="7.0.10-18"
DEF_SHA="0e2f5816062a427f9e83a2eb76d5ad1c8327ef40"
DEF_ORIGIN="http://mirror.checkdomain.de/imagemagick/ImageMagick-${DEF_VERSION}.tar.xz"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}ImageMagick-${DEF_VERSION}.tar.xz"
DEF_REQUIREMENTS="pkgconf-static libedit db lzma xz pcre expat yaml libffi libressl python27 libtool libpaper libpng libjpeg-turbo nasm jpeg jbig2dec jbigkit openjpeg tiff x265 libde265 libheif freetype t1lib libxml2 fontconfig freefont sharefont jasper fftw"
DEF_CONFIGURE_ARGS="--with-lzma --without-perl --with-threads --with-fftw --with-jbig --with-openjp2 --with-modules --with-heic --disable-static"
DEF_USELESS="lib/*python* include lib/*.{a,la,sh} share/{examples,info,bison,doc,libtool,texinfo,util-macros,t1lib/doc,gtk-doc} share/ac* share/auto* man lib/{cmake,openjpeg-2.3,pkgconfig} bin/python* bin/db_* docs sbin"
DEF_AFTER_INSTALL_METHOD="strip_modules"
strip_modules () {
    ${STRIP_BIN} \
        ${PREFIX}/lib/ImageMagick-${DEF_VERSION%-*}/modules-Q16HDRI/coders/*.so \
        ${PREFIX}/lib/ImageMagick-${DEF_VERSION%-*}/modules-Q16HDRI/filters/*.so
}
DEF_EXPORTS="magick convert display identify animate compare composite conjure mogrify montage thumbnail stream import magick-script Magick++-config MagickWand-config MagickCore-config"
DEF_CONFLICTS_WITH="GraphicsMagick"
DEF_USE_SAFE_STACK=YES
