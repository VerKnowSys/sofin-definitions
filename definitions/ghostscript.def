DEF_FULL_NAME="Ghostscript library"
DEF_NAME="ghostscript"
DEF_SHA="761c9c25b9f5fe01197bd1510f527b3c1b6eb9de"
DEF_VERSION="9.18"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.gz"
DEF_CONFIGURE_ARGS="--with-libiconv=native --disable-dbus --disable-compile-inits --with-ijs --with-libidn=${PREFIX} --disable-gtk --with-memory-alignment=8 --enable-contrib --without-luratech --without-x --with-drivers=BMP,JPEG,PNG,PS,TIFF --with-system-libtiff --enable-threadsafe --enable-threading --disable-fapi --with-fontpath=${SERVICE_DIR}/lib/X11/fonts --enable-dynamic"
DEF_REQUIREMENTS="pkgconf make m4 zlib pth xz lzo lz4 expat libressl python27 perl autoconf automake114 bison libpaper nasm tiff openjpeg jasper lcms2 texinfo libidn freetype t1lib fontconfig freetype sharefont"
DEF_STANDALONE=YES
DEF_COMPILER_FLAGS="-DA4 -DUPD_SIGNAL=0 -DOPJ_STATIC"
DEF_CONFIGURE_METHOD="./autogen.sh"
DEF_MAKE_METHOD="make_stuff"
make_stuff () {
    _compile_mode="$1"
    ${MKDIR_BIN} -p "${SERVICE_DIR}/lib/X11/fonts"
    SHARE_JPEG=1 SHARE_LIBPNG=1 LIBPNG_NAME=png \
        SHARE_LIBTIFF=1 SHARE_ZLIB=1 SYNC=posync \
        SHARE_JBIG2=1 JPX_LIB=jasper SHARE_JPX=0 \
        JPXSRCDIR=jasper JPX_CFLAGS=-DJAS_CONFIGURE \
        CFLAGS_STANDARD="${DEF_COMPILER_FLAGS} ${CFLAGS}" \
        XCFLAGS="${DEF_COMPILER_FLAGS} ${CFLAGS}" \
        XLDFLAGS="${DEF_LINKER_FLAGS} ${LDFLAGS}" \
        SOC_LOADER=dxmainc.c \
        AUXEXTRALIBS="-pthread -L${PREFIX}/lib -I${PREFIX}/include" \
        make ${_compile_mode} && \
            note "Done build"
}
DEF_INSTALL_METHOD="make_stuff install"
DEF_USELESS="include/python* lib/*perl* lib/python* man libexec share/aclocal* share/auto* share/cups share/bison share/doc share/examples share/texinfo share/info share/libtool share/${DEF_NAME}/${DEF_VERSION}/doc share/${DEF_NAME}/${DEF_VERSION}/examples"
DEF_EXPORTS="gs gsbj gsdj gsdj500 gslj gslp gsnd"
