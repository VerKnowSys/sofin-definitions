DEF_FULL_NAME="GNU Midnight Commander File Manager"
DEF_STANDALONE=YES
DEF_NAME="mc"
DEF_VERSION="4.8.25"
DEF_SHA="4082ae830f09e919112aa3fc1d7e5333921a6a33"
DEF_SOURCE_PATH="${MAIN_SOURCE_REPOSITORY}${DEF_NAME}-${DEF_VERSION}.tar.xz"
DEF_ORIGIN="http://ftp.midnight-commander.org/${DEF_NAME}-${DEF_VERSION}.tar.xz"
DEF_REQUIREMENTS="@glib"
DEF_CONFIGURE_ARGS="--with-pic --with-mmap --with-screen=ncurses --with-search-engine=glib --with-subshell \
--with-pcre=${PREFIX} --with-libintl-prefix=${PREFIX} --without-internal-edit --with-diff-viewer --without-x \
--enable-shared --enable-charset --enable-background --enable-mclib --enable-threads \
--disable-static --disable-nls --disable-assert --disable-tests --disable-doxygen-doc --disable-doxygen-dot --disable-doxygen-html"
DEF_EXPORTS="${DEF_NAME} ${DEF_NAME}view"
DEF_USELESS="share/{gdb,bash-completion,glib-2.0,info,libtool,emacs,icu,locale} share/*doc* man share/ac* share/auto* lib/{cmake,pkgconfig,icu,gettext,gio,glib-2.0} share/gettext* libdata sbin include lib/*.{a,la}"

DEF_AFTER_CONFIGURE_METHOD="patch_stuff"
patch_stuff () {
    try "${SED_BIN} -i '' -e 's|missing-parameter-type|unused-variable|; s|but-set-variable|variable|' configure" \
        && try "${SED_BIN} -i '' -e 's|SUBDIRS = intl|SUBDIRS =|' Makefile.in" \
            && debug "${0}: patch_stuff() successful!" \
                && return 0
    return 1
}

case "${SYSTEM_NAME}-${SYSTEM_VERSION}" in
    FreeBSD-11*)
        unset DEF_USE_LTO
        ;;
esac
