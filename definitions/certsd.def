DEF_TYPE="meta"

DEF_FULL_NAME="CertsD - ACME client in pure Rust"
DEF_NAME="certsd"
DEF_VERSION="0.6.1"
DEF_REQUIREMENTS="@curl-openssl rust-basic"
DEF_EXPORTS="${DEF_NAME}"
DEF_USELESS="etc lib libexec share"

DEF_AFTER_INSTALL_METHOD="install_certsd"
install_certsd () {
    mkdir -p "${PREFIX}/bin"
    run "cargo install --locked --version ${DEF_VERSION} ${DEF_NAME}"
    run "patchelf --set-rpath ${PREFIX}/lib ${SERVICE_DIR}/bin/${DEF_NAME}"
    run "${MV_BIN} -v ${SERVICE_DIR}/bin/${DEF_NAME} ${PREFIX}/bin/${DEF_NAME}"
}
